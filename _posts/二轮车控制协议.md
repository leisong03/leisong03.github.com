---
typora-copy-images-to: ../images
---

# 二轮车调试内部手册



## 接线

一共有两个电机口，分别是左轮电机和右轮电机

| 板上电机端口 | AGV功能链接 | 备注                                                         |
| ------------ | ----------- | ------------------------------------------------------------ |
| Y电机端口    | 左轮驱动    | 1,Y_EN(EN)，2,Y_MS1（PG）,3,Y_MS2（空）,4,Y_SV（SV）,5,Y_ST（BK）,6, Y_DIR（FR）, |
| Z电机端口    | 右轮驱动    | 1,Z_EN(EN)，2,Z_MS1（PG）,3,Z_MS2（空）, 4,Z_SV（SV）, 5,Z_ST（BK）, 6,Z_DIR（FR）, |
| E0~E1        | CAN+USART3  | E1_STEP(USART3_TX),E1_DIR(USART3_RX),E0_DIR(CAN_RX),E1_EN(CAN_TX) |

板子上需要做两处修改：

1. 焊接掉C299
2. R403短接或者换0欧

![image-20181105101647603](../images/image-20181105101647603.png)

## 控制方法程序


## 协议

###PC->STM32

包有效时间为2秒，超过两秒会停车且不刹车

| Byte  | Param | Describe | Type  |  Range   |       Unit |
| ----- | ----- | :------: | :---: | :------: | ---------: |
| Byte0 | 包头  |   0x68   | uint8 |          |            |
| Byte1 | 左轮  |   速度   | int8  | -127~127 | 归一化速度 |
| Byte2 | 右轮  |   速度   | int8  | -127~127 | 归一化速度 |
| Byte3 | 包尾  |   0xFF   | uint8 |          |            |

###Stm32->PC

| Byte        | Param    | Describe | Type  |    Range     |                                                Unit |
| ----------- | -------- | :------: | :---: | :----------: | --------------------------------------------------: |
| Byte0       | 包头     |   0x68   | uint8 |              |                                                     |
| Byte1~Byte2 | 里程     |   里程   | int8  | -32768~32768 |                                             1/100圈 |
| Byte3       | 当前速度 |   速度   | int8  |   -127~127   | 0:手刹车，1：脚刹车，其余为速度，速度值为归一化速度 |
| Byte4       | 包尾     |   0xFF   | uint8 |              |                                                     |

### 物理协议

#### rs232

波特率为9600，8N1

#### CAN

波特率为125Kbps